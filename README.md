# mts_mlops_hw_1

Это пример простого сервиса для обнаружения фрод транзакций на основе CatBoost модели.

Обработка данных происходит в реальном времени при помощи watchdog, который следит за появлением новых файлов в папке ``input``. Результаты обработки сохраняются в папку ``output`` с соответствующим именем файла.

Кроме этого создается график плотности распределения предсказанных моделью скоров и топ-5 фич по важности.

Catboost модель является довольно слабой, чтобы влезть в ограничения github. Если нужна более сильная модель, ее можно скачать по [ссылке](https://disk.360.yandex.ru/d/fCS6CT4RATCTsA) и заменить на ту, которая находится в папке ``models``.

## Архитектура проекта
```
├── README.md
├── app
│   ├── app.py
│   └── core
│       ├── datahandler.py
│       ├── fraudservice.py
│       ├── logging.py
│       ├── models.py
│       └── preprocessing.py
├── input
├── output
├── models
│   └── base_fraudmodel.cbm
```

Проект разбит на несколько компонентов:
- Класс модели
- Класс сервиса
- Класс обработчика watchdog

Кроме этого во всем проекте настроено логирование с разными уровнями логов.

## Запуск сервиса
0. Подготовьте папки для входных и выходных данных:
   ```bash
   mkdir input output
   ```
1. Соберите Docker образ:
   ```bash
   docker build -t fraud-app .
   ```
2. Запустите контейнер, смонтировав локальные папки `input` и `output`:
   ```bash
    docker run --rm -v "$(pwd)/input:/app/input:rw" -v "$(pwd)/output:/app/output:rw" fraud-app
   ```